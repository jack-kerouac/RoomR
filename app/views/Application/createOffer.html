#{extends 'main.html' /}
#{set title:'create offer' /}

#{set 'moreScripts'}
    #{get 'moreScripts' /}
    
    *{TODO: remove the JQuery script again}*
    #{script 'libs/jquery-1.6.2.min.js' /}
    #{script 'libs/play-jqvalidate.min.js' /}
    
<script type="text/javascript">
	$(document).ready(function() {
		
// 		$("#createOfferForm").formwizard({
//             formPluginEnabled: false,
//             validationEnabled: true,
//             historyEnabled: true,
//             focusFirstInput : true,
//             formOptions : {
//                 success: function(data) {
//                     $("#status").fadeTo(500,1,function(){
//                         $(this).html("You are now registered!").fadeTo(5000, 0);
//                     })
//                 },
//                 beforeSubmit: function(data){
//                     $("#data").html("data sent to the server: " + $.param(data));
//                 },
//                 dataType: 'json',
//                 resetForm: true
//             }
//         });

// 		$(function() {
// 			var dates = $( "#fromDate, #toDate" ).datepicker({
// 				defaultDate: "+1w",
// 				changeMonth: false,
// 				numberOfMonths: 2,
// 				onSelect: function( selectedDate ) {
// 					var option = this.id == "fromDate" ? "minDate" : "maxDate",
// 						instance = $( this ).data( "datepicker" ),
// 						date = $.datepicker.parseDate(
// 							instance.settings.dateFormat ||
// 							$.datepicker._defaults.dateFormat,
// 							selectedDate, instance.settings );
// 					dates.not( this ).datepicker( "option", option, date );
// 				}
// 			});
// 		});
		
	});
</script>
#{/set}


<h1>Create offer</h1>
#{jqvalid.form @Offers.createOffer(), id:'createOfferForm'}
	<fieldset id="location" class="step">
		${offer}
	
		#{jqvalid.field 'offer.location.quarter'}
		<p>
			<label for="${field.id}">&{field.name}</label>
			<input id="${field.id}" name="${field.name}" type="text" data-validate="${field.validationData}" value="${field.value}" class="${field.errorClass}">
			<span class="error">${field.error}</span>
		</p>
		#{/}
	
		<fieldset id="address">
			#{jqvalid.field 'offer.location.address.street'}
			<p>
				<label for="${field.id}">&{field.name}</label>
				<input id="${field.id}" name="${field.name}" type="text" data-validate="${field.validationData}" value="${field.value}" class="${field.errorClass}">
				<span class="error">${field.error}</span>
			</p>
			#{/}
			#{jqvalid.field 'offer.location.address.streetNumber'}
			<p>
				<label for="${field.id}">&{field.name}</label>
				<input id="${field.id}" name="${field.name}" type="number" data-validate="${field.validationData}" value="${field.value}" class="${field.errorClass}">
				<span class="error">${field.error}</span>
			</p>
			#{/}
			#{jqvalid.field 'offer.location.address.zipCode'}
			<p>
				<label for="${field.id}">&{field.name}</label>
				<input id="${field.id}" name="${field.name}" type="number" data-validate="${field.validationData}" value="${field.value}" class="${field.errorClass}">
				<span class="error">${field.error}</span>
			</p>
			#{/}
			#{jqvalid.field 'offer.location.address.city'}
			<p>
				<label for="${field.id}">&{field.name}</label>
				<input id="${field.id}" name="${field.name}" type="text" data-validate="${field.validationData}" value="${field.value}" class="${field.errorClass}">
				<span class="error">${field.error}</span>
			</p>
			#{/}
		</fieldset>
	</fieldset>
	<fieldset id="roomDetails" class="step">
		#{jqvalid.field 'offer.roomDetails.freePeriodStart'}
		<p>
			<label for="${field.id}">&{field.name}</label>
			<input id="${field.id}" name="${field.name}" type="text" data-validate="${field.validationData}" value="${field.value}" class="${field.errorClass}">
			<span class="error">${field.error}</span>
		</p>
		#{/}
		#{jqvalid.field 'offer.roomDetails.freePeriodEnd'}
		<p>
			<label for="${field.id}">&{field.name}</label>
			<input id="${field.id}" name="${field.name}" type="text" data-validate="${field.validationData}" value="${field.value}" class="${field.errorClass}">
			<span class="error">${field.error}</span>
		</p>
		#{/}
		#{jqvalid.field 'offer.roomDetails.rent'}
		<p>
			<label for="${field.id}">&{field.name}</label>
			<input id="${field.id}" name="${field.name}" type="text" data-validate="${field.validationData}" value="${field.value}" class="${field.errorClass}">
			<span class="error">${field.error}</span>
		</p>
		#{/}
	</fieldset>
	<input type="submit">
	<input type="reset">
#{/jqvalid.form}
