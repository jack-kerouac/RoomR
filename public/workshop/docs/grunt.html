<!DOCTYPE html>  <html> <head>   <title>grunt.js</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="grunt.html">                 grunt.js               </a>                                           <a class="source" href="formatPriority.html">                 formatPriority.coffee               </a>                                           <a class="source" href="main.html">                 main.coffee               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               grunt.js             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <p><a href="https://github.com/cowboy/grunt">Grunt</a> ist ein simples, taskbasiertes Buildsystem
aus Basis von Node. Es ist noch recht neu und nicht sehr fancy, dafür beliebt und
einfach zu benutzen.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>Diese Zeile muss in jede Grunt-Datei. Sie stellt die <code>grunt</code>-API zur Verfügung. Leider
mag Grunt nicht (von sich aus) mit CoffeeScript spielen, so dass wir im Buildsystem
nicht an Vanilla-JS vorbeikommen.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">grunt</span><span class="p">){</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>Gesamte Konfiguration des Build-Prozesses</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">grunt</span><span class="p">.</span><span class="nx">initConfig</span><span class="p">({</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>Gesamten selbstgeschriebenen Non-CoffeeScript-Code (d.h. das Buildsystem) einem
Qualitätscheck mittels <a href="http://jshint.com">JSHint</a> unterziehen.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">lint</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">build</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;build/**/*.js&#39;</span><span class="p">]</span> <span class="c1">// Alle .js-Files in build (inkl. Unterverzeichnisse)</span>
    <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>Haupt-.styl-File(s) nach CSS kompilieren. Alles was als Modul in die Haupt-Files
eingebunden ist, wird direkt in den Output hineinkompiliert.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">stylus</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">main</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">file</span><span class="o">:</span> <span class="s1">&#39;src/style/main.styl&#39;</span><span class="p">,</span> <span class="c1">// Quelldatei</span>
        <span class="nx">dest</span><span class="o">:</span> <span class="s1">&#39;app.css&#39;</span><span class="p">,</span>             <span class="c1">// Zieldatei</span>
        <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>                   <span class="c1">// Zusatzoptionen</span>
          <span class="nx">url</span><span class="o">:</span> <span class="p">{</span>
            <span class="nx">paths</span><span class="o">:</span> <span class="p">[</span> <span class="s1">&#39;src/style&#39;</span> <span class="p">]</span>   <span class="c1">// Pfad(e) für Bilder</span>
          <span class="p">},</span>
          <span class="nx">compress</span><span class="o">:</span> <span class="kc">true</span>             <span class="c1">// Komprimierung an/aus</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>Sämtliches CoffeeScript nach JS kompilieren. Die dabei entstehenden Dateien werden
in den nächsten Schritten von QUnit getestet, vom Require.JS-Optimizer
zusammengefügt und komprimiert und schließlich vom Cleanup-Task gelöscht.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">coffee</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">src</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;src/**/*.coffee&#39;</span><span class="p">],</span>  <span class="c1">// Alle .coffee-Files in src (inkl. Unterverzeichnisse)</span>
      <span class="nx">test</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;test/**/*.coffee&#39;</span><span class="p">]</span> <span class="c1">// Alle .coffee-Files in test (inkl. Unterverzeichnisse)</span>
    <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>JS-Tests mit QUnit in einer PhantomJS-Instanz durchführen. Quasi ein Browsertest
ohne Browser.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">qunit</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">all</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;test/*.html&#39;</span><span class="p">]</span>
    <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>Dokumentation aus den .coffee-Files erstellen</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">docco</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">src</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">files</span><span class="o">:</span> <span class="p">[</span>             <span class="c1">// Zu dokumentierende Files</span>
          <span class="s1">&#39;src/**/*.coffee&#39;</span><span class="p">,</span>
          <span class="s1">&#39;grunt.js&#39;</span>
        <span class="p">],</span>
        <span class="nx">dest</span><span class="o">:</span> <span class="s1">&#39;&#39;</span>             <span class="c1">// Zielverzeichnis, in dem `/docs` angelegt wird</span>
      <span class="p">}</span>
    <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>RequireJS-Module zusammenfügen, komprimieren und optimieren</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">requirejs</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">baseUrl</span><span class="o">:</span> <span class="s1">&#39;./src/script&#39;</span><span class="p">,</span>  <span class="c1">// Script-Source-Verzeichnis</span>
      <span class="nx">paths</span><span class="o">:</span> <span class="p">{</span>                  <span class="c1">// Pfade für Libraries mit doofen/abweichenden Dateinamen</span>
        <span class="s1">&#39;jquery&#39;</span><span class="o">:</span> <span class="s1">&#39;lib/vendor/jquery-1.7.2&#39;</span><span class="p">,</span>      <span class="c1">// Versionsnummer</span>
        <span class="s1">&#39;backbone&#39;</span><span class="o">:</span> <span class="s1">&#39;lib/vendor/backbone-amd&#39;</span><span class="p">,</span>    <span class="c1">// AMD-Build (https://github.com/amdjs)</span>
        <span class="s1">&#39;underscore&#39;</span><span class="o">:</span> <span class="s1">&#39;lib/vendor/underscore-amd&#39;</span> <span class="c1">// AMD-Build (https://github.com/amdjs)</span>
      <span class="p">},</span>
      <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;main&#39;</span><span class="p">,</span>             <span class="c1">// Wurzelmodul</span>
      <span class="nx">out</span><span class="o">:</span> <span class="s1">&#39;app.js&#39;</span>             <span class="c1">// Zieldatei</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>optimize: 'none'        // Optimierung deaktivieren (Debugging/Schnellerer Build)</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>Cleanup; die aus CS generierten JS-Files entfernen</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">cleanup</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">src</span><span class="o">:</span>  <span class="s1">&#39;&lt;config:coffee.src&gt;&#39;</span><span class="p">,</span> <span class="c1">// Alle Source-JS-Files</span>
      <span class="nx">test</span><span class="o">:</span> <span class="s1">&#39;&lt;config:coffee.test&gt;&#39;</span> <span class="c1">// Alle Test-JS-Files</span>
    <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p>Den ganzen Build-Prozess automatisch starten, sobald sich eine .coffee- oder
.styl-Datei oder die grunt.js ändert
TBD</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="p">});</span></pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p>Nicht fest in Grunt eingebaute Tasks laden</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">grunt</span><span class="p">.</span><span class="nx">loadTasks</span><span class="p">(</span><span class="s1">&#39;build/tasks&#39;</span><span class="p">);</span>         <span class="c1">// Alle Tasks in build/task, z.B. der CS-Compiler</span>
  <span class="nx">grunt</span><span class="p">.</span><span class="nx">loadNpmTasks</span><span class="p">(</span><span class="s1">&#39;grunt-requirejs&#39;</span><span class="p">);</span> <span class="c1">// Task in Form eines NPM-Moduls</span></pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>Alle automatisch zu startenden Tasks unter dem Label 'default' ablegen
<code>cleanup</code> rauswerfen um die generierten JavaScript-Dateien zu inspizieren</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">grunt</span><span class="p">.</span><span class="nx">registerTask</span><span class="p">(</span><span class="s1">&#39;default&#39;</span><span class="p">,</span> <span class="s1">&#39;lint stylus coffee qunit docco requirejs cleanup&#39;</span><span class="p">);</span>

<span class="p">};</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 